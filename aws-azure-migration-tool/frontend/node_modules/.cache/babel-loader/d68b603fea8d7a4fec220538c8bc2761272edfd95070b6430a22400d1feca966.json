{"ast":null,"code":"import { marked } from 'marked';\nimport axios from 'axios';\nexport default {\n  name: 'MappingPage',\n  // Changed component name\n  data() {\n    return {\n      glueConfig: null,\n      glueScript: null,\n      glueConfigName: '',\n      glueScriptName: '',\n      report: null,\n      isLoading: false,\n      error: null\n    };\n  },\n  computed: {\n    hasFiles() {\n      return this.glueConfig && this.glueScript;\n    },\n    renderedReport() {\n      return this.report ? marked(this.report) : '';\n    }\n  },\n  methods: {\n    handleGlueConfigChange(event) {\n      const file = event.target.files[0];\n      if (file) {\n        this.glueConfigName = file.name;\n        this.glueConfig = file;\n        this.error = null;\n      }\n    },\n    handleGlueScriptChange(event) {\n      const file = event.target.files[0];\n      if (file) {\n        this.glueScriptName = file.name;\n        this.glueScript = file;\n        this.error = null;\n      }\n    },\n    async generateMapping() {\n      if (!this.hasFiles) {\n        this.error = \"Please upload both AWS Glue configuration and script files.\";\n        return;\n      }\n      this.isLoading = true;\n      this.error = null;\n      try {\n        const formData = new FormData();\n        formData.append('glue_config', this.glueConfig);\n        formData.append('glue_script', this.glueScript);\n        const response = await axios.post('/api/generate-mapping', formData);\n        this.report = response.data.report;\n      } catch (error) {\n        this.error = `Error generating report: ${error.response?.data?.detail || error.message}`;\n      } finally {\n        this.isLoading = false;\n      }\n    },\n    resetForm() {\n      this.glueConfig = null;\n      this.glueScript = null;\n      this.glueConfigName = '';\n      this.glueScriptName = '';\n      this.report = null;\n      this.error = null;\n\n      // Reset file input elements after Vue has updated the DOM\n      this.$nextTick(() => {\n        const glueConfigInput = document.getElementById('glue-config');\n        if (glueConfigInput) {\n          glueConfigInput.value = '';\n        }\n        const glueScriptInput = document.getElementById('glue-script');\n        if (glueScriptInput) {\n          glueScriptInput.value = '';\n        }\n      });\n    },\n    downloadReport() {\n      if (!this.report) return;\n      const blob = new Blob([this.report], {\n        type: 'text/markdown'\n      });\n      const url = window.URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = 'aws-azure-migration-mapping.md';\n      document.body.appendChild(a);\n      a.click();\n      window.URL.revokeObjectURL(url);\n      document.body.removeChild(a);\n    }\n  }\n};","map":{"version":3,"names":["marked","axios","name","data","glueConfig","glueScript","glueConfigName","glueScriptName","report","isLoading","error","computed","hasFiles","renderedReport","methods","handleGlueConfigChange","event","file","target","files","handleGlueScriptChange","generateMapping","formData","FormData","append","response","post","detail","message","resetForm","$nextTick","glueConfigInput","document","getElementById","value","glueScriptInput","downloadReport","blob","Blob","type","url","window","URL","createObjectURL","a","createElement","href","download","body","appendChild","click","revokeObjectURL","removeChild"],"sources":["D:\\ddt_aws_adf\\aws-azure-migration-tool\\frontend\\src\\views\\MappingPage.vue"],"sourcesContent":["<template>\r\n  <div class=\"mapping-page dark-theme-page\">\r\n    <h1 class=\"page-title mb-4\">AWS Glue to Azure Data Factory Migration Tool</h1>\r\n    \r\n    <div v-if=\"!report\" class=\"upload-section\">\r\n      <div class=\"card dark-card\">\r\n        <div class=\"card-header dark-card-header\">\r\n          <h5 class=\"mb-0\">Upload AWS Glue Files</h5>\r\n        </div>\r\n        <div class=\"card-body\">\r\n          <div class=\"mb-3\">\r\n            <label for=\"glue-config\" class=\"form-label\">AWS Glue Configuration (JSON)</label>\r\n            <input \r\n              type=\"file\" \r\n              id=\"glue-config\" \r\n              class=\"form-control form-control-dark\"\r\n              accept=\".json\"\r\n              @change=\"handleGlueConfigChange\"\r\n              :disabled=\"isLoading\"\r\n            />\r\n            <div v-if=\"glueConfigName\" class=\"mt-2 text-light\"> <!-- Changed from text-success for better visibility -->\r\n              <small>Selected file: {{ glueConfigName }}</small>\r\n            </div>\r\n          </div>\r\n          \r\n          <div class=\"mb-3\">\r\n            <label for=\"glue-script\" class=\"form-label\">AWS Glue Script (Python)</label>\r\n            <input \r\n              type=\"file\" \r\n              id=\"glue-script\" \r\n              class=\"form-control form-control-dark\"\r\n              accept=\".py\"\r\n              @change=\"handleGlueScriptChange\"\r\n              :disabled=\"isLoading\"\r\n            />\r\n            <div v-if=\"glueScriptName\" class=\"mt-2 text-light\"> <!-- Changed from text-success -->\r\n              <small>Selected file: {{ glueScriptName }}</small>\r\n            </div>\r\n          </div>\r\n          \r\n          <button \r\n            @click=\"generateMapping\" \r\n            class=\"btn btn-cta-primary\" \r\n            :disabled=\"!hasFiles || isLoading\"\r\n          >\r\n            <span v-if=\"isLoading\" class=\"spinner-border spinner-border-sm me-2\" role=\"status\" aria-hidden=\"true\"></span>\r\n            {{ isLoading ? 'Generating...' : 'Generate Migration Mapping' }}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    \r\n    <div v-if=\"isLoading\" class=\"loading-section text-center my-5\">\r\n      <div class=\"spinner-border text-accent\" role=\"status\"> <!-- Changed to text-accent -->\r\n        <span class=\"visually-hidden\">Loading...</span>\r\n      </div>\r\n      <p class=\"mt-3\">Generating migration mapping report...</p>\r\n      <p class=\"text-muted-dark\">This may take a few moments.</p> <!-- Custom muted class for dark theme -->\r\n    </div>\r\n    \r\n    <div v-if=\"report\" class=\"report-section\">\r\n      <div class=\"d-flex justify-content-end mb-3\">\r\n        <button @click=\"resetForm\" class=\"btn btn-cta-secondary me-2\">Upload New Files</button>\r\n        <button @click=\"downloadReport\" class=\"btn btn-cta-primary\">Download Report</button>\r\n      </div>\r\n      \r\n      <div class=\"card dark-card\">\r\n        <div class=\"card-header dark-card-header\">\r\n          <h5 class=\"mb-0\">Migration Mapping Report</h5>\r\n        </div>\r\n        <div class=\"card-body\">\r\n          <div class=\"report-content\" v-html=\"renderedReport\"></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    \r\n    <div v-if=\"error\" class=\"alert alert-danger dark-alert-danger mt-3\"> <!-- Custom class for dark alert -->\r\n      {{ error }}\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { marked } from 'marked';\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  name: 'MappingPage', // Changed component name\r\n  data() {\r\n    return {\r\n      glueConfig: null,\r\n      glueScript: null,\r\n      glueConfigName: '',\r\n      glueScriptName: '',\r\n      report: null,\r\n      isLoading: false,\r\n      error: null\r\n    };\r\n  },\r\n  computed: {\r\n    hasFiles() {\r\n      return this.glueConfig && this.glueScript;\r\n    },\r\n    renderedReport() {\r\n      return this.report ? marked(this.report) : '';\r\n    }\r\n  },\r\n  methods: {\r\n    handleGlueConfigChange(event) {\r\n      const file = event.target.files[0];\r\n      if (file) {\r\n        this.glueConfigName = file.name;\r\n        this.glueConfig = file;\r\n        this.error = null;\r\n      }\r\n    },\r\n    handleGlueScriptChange(event) {\r\n      const file = event.target.files[0];\r\n      if (file) {\r\n        this.glueScriptName = file.name;\r\n        this.glueScript = file;\r\n        this.error = null;\r\n      }\r\n    },\r\n    async generateMapping() {\r\n      if (!this.hasFiles) {\r\n        this.error = \"Please upload both AWS Glue configuration and script files.\";\r\n        return;\r\n      }\r\n      \r\n      this.isLoading = true;\r\n      this.error = null;\r\n      \r\n      try {\r\n        const formData = new FormData();\r\n        formData.append('glue_config', this.glueConfig);\r\n        formData.append('glue_script', this.glueScript);\r\n        \r\n        const response = await axios.post('/api/generate-mapping', formData);\r\n        this.report = response.data.report;\r\n      } catch (error) {\r\n        this.error = `Error generating report: ${error.response?.data?.detail || error.message}`;\r\n      } finally {\r\n        this.isLoading = false;\r\n      }\r\n    },\r\n    resetForm() {\r\n      this.glueConfig = null;\r\n      this.glueScript = null;\r\n      this.glueConfigName = '';\r\n      this.glueScriptName = '';\r\n      this.report = null;\r\n      this.error = null;\r\n      \r\n      // Reset file input elements after Vue has updated the DOM\r\n      this.$nextTick(() => {\r\n        const glueConfigInput = document.getElementById('glue-config');\r\n        if (glueConfigInput) {\r\n          glueConfigInput.value = '';\r\n        }\r\n        const glueScriptInput = document.getElementById('glue-script');\r\n        if (glueScriptInput) {\r\n          glueScriptInput.value = '';\r\n        }\r\n      });\r\n    },\r\n    downloadReport() {\r\n      if (!this.report) return;\r\n      \r\n      const blob = new Blob([this.report], { type: 'text/markdown' });\r\n      const url = window.URL.createObjectURL(blob);\r\n      const a = document.createElement('a');\r\n      a.href = url;\r\n      a.download = 'aws-azure-migration-mapping.md';\r\n      document.body.appendChild(a);\r\n      a.click();\r\n      window.URL.revokeObjectURL(url);\r\n      document.body.removeChild(a);\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n/* Styles are copied from original Home.vue, they will apply to .mapping-page if specific, or globally if not */\r\n.report-content {\r\n  max-height: 70vh;\r\n  overflow-y: auto;\r\n  padding: 1rem;\r\n  background-color: #f8f9fa;\r\n  border-radius: 0.25rem;\r\n}\r\n\r\n.report-content :deep(h1),\r\n.report-content :deep(h2),\r\n.report-content :deep(h3),\r\n.report-content :deep(h4),\r\n.report-content :deep(h5),\r\n.report-content :deep(h6) {\r\n  margin-top: 1.5rem;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.report-content :deep(table) {\r\n  width: 100%;\r\n  margin-bottom: 1rem;\r\n  border-collapse: collapse;\r\n}\r\n\r\n.report-content :deep(table th),\r\n.report-content :deep(table td) {\r\n  padding: 0.5rem;\r\n  border: 1px solid #dee2e6;\r\n}\r\n\r\n.report-content :deep(table th) {\r\n  background-color: #f1f1f1;\r\n}\r\n\r\n.report-content :deep(pre) {\r\n  background-color: #f1f1f1;\r\n  padding: 1rem;\r\n  border-radius: 0.25rem;\r\n  overflow-x: auto;\r\n}\r\n\r\n.report-content :deep(code) {\r\n  font-family: SFMono-Regular, Menlo, Monaco, Consolas, \"Liberation Mono\", \"Courier New\", monospace;\r\n  font-size: 0.875em;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}